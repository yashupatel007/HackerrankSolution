string encryption(string s) {
    s.erase(remove(s.begin(), s.end(), ' '), s.end());

    int L = s.size();
    int rows = floor(sqrt(L));
    int cols = ceil(sqrt(L));
    if (rows * cols < L) rows++;

    string result;
    for (int c = 0; c < cols; c++) {
        for (int r = 0; r < rows; r++) {
            int idx = r * cols + c;
            if (idx < L) result += s[idx];
        }
        if (c != cols - 1) result += ' ';
    }
    return result;
}
